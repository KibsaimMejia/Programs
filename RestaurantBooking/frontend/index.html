<!DOCTYPE html>
<html lang="en" style="background-color: #121212; color: white;">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Booking</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid #ddd;
            text-align: left;
        }
        th, td {
            padding: 8px;
        }
        th {
            background-color: #666;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        tr:hover {
            background-color: #ddd;
        }
    </style>
</head>

<body>
    <h1>Restaurant Booking</h1>
    <div id="bookingForm">
        <input type="text" id="customerName" placeholder="Customer Name" />
        <input type="number" id="tableSize" placeholder="Table Size" />
        <input type="date" id="date" />
        <input type="time" id="time" />
        <button onclick="submitBooking()">Book Table</button>
    </div>

    <h2>All Bookings</h2>
    <div id="bookingsTable">
        <!-- Bookings will be loaded here -->
    </div>

    <script>
        async function submitBooking() {
            const booking = {
                customerName: document.getElementById('customerName').value,
                tableSize: parseInt(document.getElementById('tableSize').value),
                date: document.getElementById('date').value,
                time: document.getElementById('time').value,
            };

            await fetch('/bookings', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(booking),
            });

            alert('Booking submitted');
            loadBookings(); // Reload bookings to update the list
        }

        async function loadBookings() {
            const response = await fetch('/bookings');
            const bookings = await response.json();
            const table = `
                <table>
                    <tr>
                        <th>Customer Name</th>
                        <th>Table Size</th>
                        <th>Date</th>
                        <th>Time</th>
                    </tr>
                    ${bookings.map(booking => `
                        <tr>
                            <td>${booking.customerName}</td>
                            <td>${booking.tableSize}</td>
                            <td>${booking.date}</td>
                            <td>${booking.time}</td>
                        </tr>
                    `).join('')}
                </table>
            `;
            document.getElementById('bookingsTable').innerHTML = table;
        }

        // Load bookings when the page loads
        window.onload = loadBookings;
    </script>
</body>
</html>
